# 30. 数组去重和排序
![30](/images/od/30.png)

```js
const readline = require('readline');
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout,
});

rl.on('line', function(line) {
    const inputArray = line.split(',');
    const countMap = {};
    const firstMap = {};
    for(let i=0; i<inputArray.length; i++) {
        let v = inputArray[i];
        countMap[v] = countMap[v] ? (countMap[v] + 1) : 1;
        if (!firstMap[v]) {
            firstMap[v] = i;
        }
    }
    const sortArr = firstMap.keys();
    sortArr.sort((a, b) => {
        const countA = countMap[a];
        const countB = countMap[b];
        if (countA !== countB) {
            return countB - countA;
        } else {
            const firstA = firstMap[a];
            const firstB = firstMap[b];
            return firstA - firstB;
        }
    })
    let res = '';
    for(let i=0; i<sortArr.length; i++) {
        res += sortArr[i];
        if (i !== sortArr.length - 1) {
            res += ',';
        }
    }
    console.log(res);
})

```

